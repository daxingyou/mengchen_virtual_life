var view,__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.lastCell=null,t.txt_hold.text=UserInfo.UserInfoPriceData.length.toString(),t.txt_totalValue.text=UserInfo.TotalPoints.toFixed(2),UserInfo.Diff>=0?(t.txt_myDiff.color="#ff0000",t.txt_myDiff.text="+"):(t.txt_myDiff.color="#00ff00",t.txt_myDiff.text=""),t.txt_myDiff.text=t.txt_myDiff.text+(100*UserInfo.Diff.valueOf()).toFixed(2)+"%",t.list_orders.renderHandler=new Handler(t,t.onListRender),t.list_orders.vScrollBarSkin="",t.tab_orders.selectHandler=new Handler(t,t.onTabChanged),t.tab_orders.selectedIndex=0,t.onTabChanged(0),t}return __extends(t,e),t.prototype.onOrdersYetRecieved=function(e){console.log("get orders !");var t=JSON.parse(e);null!=t&&(UserInfo.UserOrdersYet=t),this.list_orders.array=UserInfo.UserOrdersYet},t.prototype.onOrdersDoneRecieved=function(e){console.log("get orders !");var t=JSON.parse(e);null!=t&&(UserInfo.UserOrdersDone=t),this.list_orders.array=UserInfo.UserOrdersDone},t.prototype.onTabChanged=function(e){null!=this.lastCell&&(Laya.Tween.to(this.lastCell,{x:0,y:this.lastCell.y},100),this.lastCell=null),0==e?NetHelper.getInstance().httpGetOrdersYet(this,this.onOrdersYetRecieved):1==e&&NetHelper.getInstance().httpGetOrdersDone(this,this.onOrdersDoneRecieved)},t.prototype.onListRender=function(e,t){var r=this;if(!(t>this.list_orders.array.length)){var n=this.list_orders.array[t],o=e.getChildByName("code"),l=e.getChildByName("action"),s=e.getChildByName("price"),a=e.getChildByName("count");null!=o&&(o.text=n.stock_code),null!=l&&(l.text=n.direction),null!=a&&(a.text=Number(n.shares).toFixed(0)),null!=s&&(s.text=(Number(n.price)*Number(n.shares)).toFixed(2)),e.pos(0,e.y),0==this.tab_orders.selectedIndex?e.on(Laya.Event.MOUSE_DOWN,this,function(t){null!=r.lastCell&&r.lastCell!=e&&(Laya.Tween.to(r.lastCell,{x:0,y:r.lastCell.y},100),r.lastCell=null);var n=Laya.stage.mouseX,o=e.x,l=!1;e.on(Laya.Event.MOUSE_MOVE,r,function(t){o>-100&&Laya.stage.mouseX<n&&(l=!0,r.lastCell=e,e.pos(o+(Laya.stage.mouseX-n),e.y))}),e.on(Laya.Event.MOUSE_UP,r,function(t){e.offAll(Laya.Event.MOUSE_MOVE),e.offAll(Laya.Event.MOUSE_UP),e.offAll(Laya.Event.MOUSE_OUT),l&&Laya.Tween.to(e,{x:-100,y:e.y},100)}),e.on(Laya.Event.MOUSE_OUT,r,function(t){e.offAll(Laya.Event.MOUSE_MOVE),e.offAll(Laya.Event.MOUSE_UP),e.offAll(Laya.Event.MOUSE_OUT),l&&Laya.Tween.to(e,{x:-100,y:e.y},100)})}):e.hasListener(Laya.Event.MOUSE_DOWN)&&e.offAll(Laya.Event.MOUSE_DOWN);var i=e.getChildByName("delete");null!=i&&(0==this.tab_orders.selectedIndex?(i.visible=!0,i.clickHandler=new Handler(this,this.onDeleteButtonClicked,[t])):i.visible=!1)}},t.prototype.onDeleteButtonClicked=function(e){if(console.log("delete button clicked index : %d",e),UserInfo.UserOrdersYet.length>e){var t=UserInfo.UserOrdersYet[e],r=Number(t.id);null!=r&&r>0&&NetHelper.getInstance().httpCancelOrder(r,this,this.onCancelOrder)}},t.prototype.onCancelOrder=function(e){var t=JSON.parse(e);null!=t&&t.hasOwnProperty("code")&&(t.code>=0?alert(t.error):(alert(t.message),NetHelper.getInstance().httpGetOrdersYet(this,this.onOrdersYetRecieved)))},t}(ui.WalletViewUI);e.WalletView=t}(view||(view={}));