var controllers;!function(e){var o=function(){function e(){this.dis=Dispatcher.getInstance(),this.viewPool=[],this.popupPool=[],this.currentView=null,this.init()}return e.prototype.init=function(){this.dis.receive(ConstEvent.REPLACE_VIEW,this,this.onReplaceView),this.dis.receive(ConstEvent.PUSH_VIEW,this,this.onPushView),this.dis.receive(ConstEvent.POP_VIEW,this,this.onPopView),this.dis.receive(ConstEvent.POPUP_VIEW,this,this.onPopupView),this.dis.receive(ConstEvent.DESTORY_VIEW,this,this.onDestoryView)},e.prototype.onReplaceView=function(e){if(null!=e){console.log("SceneController on replace View: ",e);var o=new view[e];null!=o&&(null!=this.currentView&&Laya.stage.removeChild(this.currentView),this.currentView=o),Laya.stage.addChild(this.currentView),this.viewPool.push({name:e,newView:o})}else this.noNameError("on replace view")},e.prototype.onPushView=function(e){if(null!=e){console.log("SceneController on push View: ",e);var o=new view[e];if(null!=o){if(null!=this.currentView){var n=this.currentView;Laya.Tween.to(n,{x:-720},300,null,new Handler(this,function(){n.visible=!1}))}this.currentView=o,Laya.Tween.from(this.currentView,{x:720},300)}this.viewPool.push({name:e,newView:o}),Laya.stage.addChild(this.currentView),console.log("view pool size :%d",this.viewPool.length)}else this.noNameError("on push view")},e.prototype.onPopView=function(){if(console.log("SceneController on pop View"),null!=this.currentView){this.viewPool.pop();var e=this.currentView;Laya.Tween.to(e,{x:720},300,null,new Handler(this,function(){Laya.stage.removeChild(e)}))}if(this.viewPool.length>0){this.currentView=this.viewPool[this.viewPool.length-1].newView,console.log("SceneController number after pop : %d",this.viewPool.length);var o=this.currentView;console.log("SceneController view after pop : %s",o.name),o.x=-720,o.visible=!0,Laya.Tween.to(o,{x:0},300)}else console.log("SceneController not view in viewpool : %d",this.viewPool.length)},e.prototype.onPopupView=function(e){if(null!=e){console.log("SceneController on popup View: ",e);var o=new view[e],n=o;n.name=e,Laya.stage.addChild(o),Laya.Tween.from(n,{scaleX:0,scaleY:0},500,Laya.Ease.elasticInOut),this.popupPool.push({name:e,newView:o})}else this.noNameError("on popup view")},e.prototype.onDestoryView=function(){if(console.log("SceneController on destory popup View"),this.popupPool.length>0){var e=this.popupPool.pop().newView;Laya.stage.removeChild(e)}else console.log("SceneController not view in popuppool")},e.prototype.noNameError=function(e){console.error("SceneController %s error, view name can not be null",e)},e.getInstance=function(){return null==e.Instance&&(e.Instance=new e),e.Instance},e.Instance=new e,e}();e.SceneController=o}(controllers||(controllers={}));